<html>
<head>
<title>DicomImageViewer start with auto Java install</title>
</head>
<body>
	<script src="http://www.java.com/js/deployJava.js"></script>
	<script language="JavaScript"><!--
	
		// per "http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit"
		
		var ourWebstartApplicationName = "DicomImageViewer.jnlp"
		
        // get location of JNLP file relative to HTML page
        var dir = location.href.substring(0,location.href.lastIndexOf('/')+1);
        var ourWebstartURL = dir + ourWebstartApplicationName;
		
		var minimumVersion = '1.7'
		
		if (deployJava.isWebStartInstalled(minimumVersion)) {
			deployJava.launch(ourWebstartURL);
		}
		else {
			if (deployJava.installLatestJRE()) {
				intervalID = setInterval("launchOurJNLP()",100);	// no var so global
			}
			else {
				alert("Cannot run without Java "+minimumVersion+" or more recent installed, and cannot automatically install it");
			}
		}
		
		function launchOurJNLP() {
			if (deployJava.isWebStartInstalled(minimumVersion)) {
				clearInterval(intervalID);
				deployJava.launch(ourWebstartURL);
			}
		}

	//--></script>
</body>
</html>
